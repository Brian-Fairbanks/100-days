<!DOCTYPE html>
<html>
  <head>
    <title>AJAX Type Ahead</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    </head>

    <form class="search-form">
      <input type="text" class="search" placeholder="City or State">
      <ul class="suggestions">
        <li>Filter for a city</li>
        <li>or a state</li>
      </ul>
    </form>

    <body>

      <script>
        // array pulled from github of all cities/stats/paopulations
        const endpoint = 'https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json';

        // empty array to store in
        const cities = [];

        // built in Fetch API
        fetch(endpoint)
          .then(blob => blob.json())
          .then(data => cities.push(...data))

        function findMatches(wordToMatch, cities){
          return cities.filter((place) => {
            // console.log(place.city);
            // return all cities or states that have this.  Use REGex
            const regex = new RegExp(wordToMatch, 'gi');
            return place.city.match(regex) || place.state.match(regex);
          })
        }

        function displayMatches(){
          const matches = findMatches(this.value, cities);
          const html = matches.map(place=>{
            return `
              <li>
                <span class="name">${place.city},${place.state}<span>
                <span class="name">${place.population}<span>
              </li>
            `
          }).join("");

          suggestions.innerHTML = html;
        }

        const searchInput = document.querySelector(".search");
        const suggestions = document.querySelector(".suggestions")

        searchInput.addEventListener("change", displayMatches);
        searchInput.addEventListener("keyup", displayMatches);

      </script>

    </body>
</html>